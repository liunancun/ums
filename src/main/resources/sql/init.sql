--初始化菜单表
DROP TABLE IF EXISTS T_MENU;
CREATE TABLE T_MENU (
  ID VARCHAR(64) PRIMARY KEY,
  NAME VARCHAR(64),
  URL VARCHAR(128)
);
INSERT INTO T_MENU  VALUES('DATA', '数据管理', '/data/list.action');
INSERT INTO T_MENU  VALUES('USER', '用户管理', '/user/list.action');
INSERT INTO T_MENU  VALUES('ROLE', '角色管理', '/role/list.action');
INSERT INTO T_MENU  VALUES('TEST', '测试菜单', '/test/list.action');

-- 初始化资源表
DROP TABLE IF EXISTS T_RESOURCES;
CREATE TABLE T_RESOURCES (
  ID VARCHAR(64) PRIMARY KEY,
  NAME VARCHAR(64),
  MENUID VARCHAR(64)
);
INSERT INTO T_RESOURCES  VALUES('DATA_VIEW', '查看', 'DATA');
INSERT INTO T_RESOURCES  VALUES('DATA_EDIT', '编辑', 'DATA');
INSERT INTO T_RESOURCES  VALUES('DATA_DELETE', '删除', 'DATA');
INSERT INTO T_RESOURCES  VALUES('USER_VIEW', '查看', 'USER');
INSERT INTO T_RESOURCES  VALUES('USER_EDIT', '编辑', 'USER');
INSERT INTO T_RESOURCES  VALUES('USER_DELETE', '删除', 'USER');
INSERT INTO T_RESOURCES  VALUES('ROLE_VIEW', '查看', 'ROLE');
INSERT INTO T_RESOURCES  VALUES('ROLE_EDIT', '编辑', 'ROLE');
INSERT INTO T_RESOURCES  VALUES('ROLE_DELETE', '删除', 'ROLE');
INSERT INTO T_RESOURCES  VALUES('TEST_VIEW', '查看', 'TEST');
INSERT INTO T_RESOURCES  VALUES('TEST_EDIT', '编辑', 'TEST');
INSERT INTO T_RESOURCES  VALUES('TEST_DELETE', '删除', 'TEST');

-- 初始化角色表
DROP TABLE IF EXISTS T_ROLE;
CREATE TABLE T_ROLE (
  ID INT PRIMARY KEY AUTO_INCREMENT,
  NAME VARCHAR(64),
  CREATETIME TIMESTAMP,
  DESC VARCHAR(512)
);
INSERT INTO T_ROLE  VALUES(0, '管理员', now(), '系统管理员角色');
INSERT INTO T_ROLE  VALUES(1, '普通用户', now(), '普通用户角色');

-- 初始化角色资源映射表
DROP TABLE IF EXISTS T_ROLE_RESOURCES;
CREATE TABLE T_ROLE_RESOURCES (
  ROLEID INT,
  RESOURCESID VARCHAR(64)
);
INSERT INTO T_ROLE_RESOURCES  VALUES(0, 'DATA_VIEW');
INSERT INTO T_ROLE_RESOURCES  VALUES(0, 'DATA_EDIT');
INSERT INTO T_ROLE_RESOURCES  VALUES(0, 'DATA_DELETE');
INSERT INTO T_ROLE_RESOURCES  VALUES(0, 'USER_VIEW');
INSERT INTO T_ROLE_RESOURCES  VALUES(0, 'USER_EDIT');
INSERT INTO T_ROLE_RESOURCES  VALUES(0, 'USER_DELETE');
INSERT INTO T_ROLE_RESOURCES  VALUES(0, 'ROLE_VIEW');
INSERT INTO T_ROLE_RESOURCES  VALUES(0, 'ROLE_EDIT');
INSERT INTO T_ROLE_RESOURCES  VALUES(0, 'ROLE_DELETE');
INSERT INTO T_ROLE_RESOURCES  VALUES(0, 'TEST_VIEW');
INSERT INTO T_ROLE_RESOURCES  VALUES(0, 'TEST_EDIT');
INSERT INTO T_ROLE_RESOURCES  VALUES(0, 'TEST_DELETE');
INSERT INTO T_ROLE_RESOURCES  VALUES(1, 'DATA_VIEW');
INSERT INTO T_ROLE_RESOURCES  VALUES(1, 'DATA_EDIT');
INSERT INTO T_ROLE_RESOURCES  VALUES(1, 'DATA_DELETE');
INSERT INTO T_ROLE_RESOURCES  VALUES(1, 'TEST_VIEW');
INSERT INTO T_ROLE_RESOURCES  VALUES(1, 'TEST_EDIT');
INSERT INTO T_ROLE_RESOURCES  VALUES(1, 'TEST_DELETE');

--初始化用户表
DROP TABLE IF EXISTS T_USER;
CREATE TABLE T_USER (
  ID INT PRIMARY KEY AUTO_INCREMENT,
  USERNAME VARCHAR(64),
  PASSWORD VARCHAR(64),
  CREATETIME TIMESTAMP,
  DESC VARCHAR(512),
  CONSTRAINT UC_USERNAME UNIQUE (USERNAME)
);
INSERT INTO T_USER  VALUES(0, 'admin', '21232f297a57a5a743894a0e4a801fc3', now(),'admin');
INSERT INTO T_USER  VALUES(1, 'ums', '21232f297a57a5a743894a0e4a801fc3', now(),'ums');

-- 初始化用户角色映射表
DROP TABLE IF EXISTS T_USER_ROLE;
CREATE TABLE T_USER_ROLE (
  USERID INT,
  ROLEID INT
);
INSERT INTO T_USER_ROLE  VALUES(0, 0);
INSERT INTO T_USER_ROLE  VALUES(1, 1);